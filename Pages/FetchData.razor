@page "/fetchdata"
@using BlazorTest.Data
@using Telerik.Blazor.Components.Grid

@inject WeatherForecastService ForecastService

<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from a service using a Telerik DataGrid.</p>

@if (forecasts == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <TelerikGrid Data=@forecasts Pageable=true PageSize=5 Sortable=true>
        <TelerikGridColumns>
            <TelerikGridColumn Field=@nameof(WeatherForecast.Date)>
                <Template>
                    @($"{(context as WeatherForecast).Date:d}")
                </Template>
            </TelerikGridColumn>
            <TelerikGridColumn Field=@nameof(WeatherForecast.TemperatureC) />
            <TelerikGridColumn Field=@nameof(WeatherForecast.TemperatureF) />
            <TelerikGridColumn Field=@nameof(WeatherForecast.Summary) />
        </TelerikGridColumns>
    </TelerikGrid>
}

@functions {
    WeatherForecast[] forecasts;

    protected override async Task OnInitAsync()
    {
        forecasts = await ForecastService.GetForecastAsync(DateTime.Now);
    }
}
