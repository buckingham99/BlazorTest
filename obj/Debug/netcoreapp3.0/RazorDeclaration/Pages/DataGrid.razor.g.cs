#pragma checksum "C:\Develop\GitHub\BlazorTest\Pages\DataGrid.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7f3a9110fddaaefa8a41318feeee0b64f0f3c05b"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorTest.Pages
{
    #line hidden
    using System;
    using System.Threading.Tasks;
    using System.Net.Http;
    using Microsoft.AspNetCore.Components.Forms;
    using Microsoft.AspNetCore.Components.Layouts;
    using Microsoft.AspNetCore.Components.Routing;
    using Microsoft.JSInterop;
    using BlazorTest.Shared;
    using BlazorTest.Data;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using Microsoft.AspNetCore.Components;
    [Microsoft.AspNetCore.Components.Layouts.LayoutAttribute(typeof(MainLayout))]
    public class DataGrid : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.RenderTree.RenderTreeBuilder builder)
        {
        }
        #pragma warning restore 1998
#line 255 "C:\Develop\GitHub\BlazorTest\Pages\DataGrid.razor"
            
    int recordsToReturn = 200;
    List<User> users = new List<User>();
    int namesCount = 0;
    string SortField = "Id";
    bool SortDesc = false;
    string SurnameSort = String.Empty;
    string GivenNameSort = String.Empty;
    string StreetAddressSort = String.Empty;
    string CitySort = String.Empty;
    string StateSort = String.Empty;
    string ZipCodeSort = String.Empty;
    string PhoneSort = String.Empty;

    // Edit Dialog Entries
    string element;
    User SelectedUser;

    protected override async Task OnInitAsync()
    {
        await ReadData();
    }
    async Task ReadData()
    {
        BlankDirectionIcons();
        users = await NamesService.GetNamesDataAsync(SortField, SortDesc);
        namesCount = users.Count;
    }

    async Task SortData(string szSortField)
    {
        BlankDirectionIcons();
        SortField = szSortField;
        SortDesc = !SortDesc;
        CalcIconDirection(SortField);
        users = await NamesService.SortNamesDataAsync(SortField, SortDesc, users);
    }

    string CalcIconDirection(string SortField)
    {
        string szDirection = SortDesc == true ? "oi oi-arrow-thick-bottom" : "oi oi-arrow-thick-top";
        switch (SortField)
        {
            case "Surname":
                SurnameSort = szDirection;
                return SurnameSort;
            case "GivenName":
                GivenNameSort = szDirection;
                return GivenNameSort;
            case "StreetAddress":
                StreetAddressSort = szDirection;
                return StreetAddressSort;
            case "City":
                CitySort = szDirection;
                return CitySort;
            case "State":
                StateSort = szDirection;
                return StateSort;
            case "TelephoneNumber":
                PhoneSort = szDirection;
                return PhoneSort;
            case "ZipCode":
                ZipCodeSort = szDirection;
                return ZipCodeSort;
            default:
                return String.Empty;
        }
    }
    void BlankDirectionIcons()
    {
        SurnameSort = "";
        GivenNameSort = "";
        StreetAddressSort = "";
        CitySort = "";
        StateSort = "";
        ZipCodeSort = "";
        PhoneSort = "";
    }

    void PopulateUserDialog(User myUser)
    {
        SelectedUser = myUser;
    }
    public async void EditUser(User myUser)
    {
        SelectedUser = myUser;

        PopulateUserDialog(myUser);
        element = await JSRuntime.InvokeAsync<string>(
           "exampleJsFunctions.showModal", myUser);

    }
    public async Task<List<User>> SaveUser(User SelectedUser)
    {
        element = await JSRuntime.InvokeAsync<string>(
           "exampleJsFunctions.hideModal", SelectedUser);

        users = await NamesService.SaveUserAsync(SortField, SortDesc, users, SelectedUser);
        this.StateHasChanged();
        return users;
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NamesService NamesService { get; set; }
    }
}
#pragma warning restore 1591
